{
  "version": 3,
  "sources": ["../../../node_modules/remix-themes/build/useBroadcastChannel.js", "../../../node_modules/remix-themes/build/theme-provider.js", "../../../node_modules/remix-themes/build/theme-server.js", "../../../node_modules/remix-themes/build/create-theme-action.js", "../../../node_modules/remix-themes/build/index.js", "../../../node_modules/clsx/dist/clsx.mjs"],
  "sourcesContent": ["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useBroadcastChannel = void 0;\nconst react_1 = require(\"react\");\nfunction useBroadcastChannel(channelName, handleMessage, handleMessageError) {\n    const channelRef = (0, react_1.useRef)(typeof window !== 'undefined' && 'BroadcastChannel' in window\n        ? new BroadcastChannel(channelName + '-channel')\n        : null);\n    useChannelEventListener(channelRef, 'message', handleMessage);\n    useChannelEventListener(channelRef, 'messageerror', handleMessageError);\n    return (0, react_1.useCallback)((data) => {\n        var _a;\n        (_a = channelRef === null || channelRef === void 0 ? void 0 : channelRef.current) === null || _a === void 0 ? void 0 : _a.postMessage(data);\n    }, [channelRef]);\n}\nexports.useBroadcastChannel = useBroadcastChannel;\nfunction useChannelEventListener(channelRef, event, handler = () => { }) {\n    (0, react_1.useEffect)(() => {\n        const channel = channelRef.current;\n        if (channel) {\n            channel.addEventListener(event, handler);\n            return () => channel.removeEventListener(event, handler);\n        }\n    }, [channelRef, event, handler]);\n}\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isTheme = exports.useTheme = exports.PreventFlashOnWrongTheme = exports.ThemeProvider = exports.mediaQuery = exports.themes = exports.Theme = void 0;\nconst jsx_runtime_1 = require(\"react/jsx-runtime\");\nconst react_1 = require(\"react\");\nconst useBroadcastChannel_1 = require(\"./useBroadcastChannel\");\nvar Theme;\n(function (Theme) {\n    Theme[\"DARK\"] = \"dark\";\n    Theme[\"LIGHT\"] = \"light\";\n})(Theme = exports.Theme || (exports.Theme = {}));\nexports.themes = Object.values(Theme);\nconst ThemeContext = (0, react_1.createContext)(undefined);\nThemeContext.displayName = 'ThemeContext';\nconst prefersLightMQ = '(prefers-color-scheme: light)';\nconst getPreferredTheme = () => window.matchMedia(prefersLightMQ).matches ? Theme.LIGHT : Theme.DARK;\nexports.mediaQuery = typeof window !== 'undefined' ? window.matchMedia(prefersLightMQ) : null;\nfunction ThemeProvider({ children, specifiedTheme, themeAction, }) {\n    const [theme, setTheme] = (0, react_1.useState)(() => {\n        // On the server, if we don't have a specified theme then we should\n        // return null and the clientThemeCode will set the theme for us\n        // before hydration. Then (during hydration), this code will get the same\n        // value that clientThemeCode got so hydration is happy.\n        if (specifiedTheme) {\n            return exports.themes.includes(specifiedTheme) ? specifiedTheme : null;\n        }\n        // there's no way for us to know what the theme should be in this context\n        // the client will have to figure it out before hydration.\n        if (typeof window !== 'object')\n            return null;\n        return getPreferredTheme();\n    });\n    const mountRun = (0, react_1.useRef)(false);\n    const broadcastThemeChange = (0, useBroadcastChannel_1.useBroadcastChannel)('remix-themes', e => setTheme(e.data));\n    (0, react_1.useEffect)(() => {\n        if (!mountRun.current) {\n            mountRun.current = true;\n            return;\n        }\n        if (!theme)\n            return;\n        fetch(`${themeAction}`, {\n            method: 'POST',\n            body: JSON.stringify({ theme }),\n        });\n        broadcastThemeChange(theme);\n    }, [broadcastThemeChange, theme, themeAction]);\n    (0, react_1.useEffect)(() => {\n        const handleChange = (ev) => {\n            setTheme(ev.matches ? Theme.LIGHT : Theme.DARK);\n        };\n        exports.mediaQuery === null || exports.mediaQuery === void 0 ? void 0 : exports.mediaQuery.addEventListener('change', handleChange);\n        return () => exports.mediaQuery === null || exports.mediaQuery === void 0 ? void 0 : exports.mediaQuery.removeEventListener('change', handleChange);\n    }, []);\n    return ((0, jsx_runtime_1.jsx)(ThemeContext.Provider, { value: [theme, setTheme], children: children }));\n}\nexports.ThemeProvider = ThemeProvider;\nconst clientThemeCode = `\n(() => {\n  const theme = window.matchMedia(${JSON.stringify(prefersLightMQ)}).matches\n    ? 'light'\n    : 'dark';\n  \n  const cl = document.documentElement.classList;\n  const dataAttr = document.documentElement.dataset.theme;\n\n  if (dataAttr != null) {\n    const themeAlreadyApplied = dataAttr === 'light' || dataAttr === 'dark';\n    if (!themeAlreadyApplied) {\n      document.documentElement.dataset.theme = theme;\n    }\n  } else {\n    const themeAlreadyApplied = cl.contains('light') || cl.contains('dark');\n    if (!themeAlreadyApplied) {\n      cl.add(theme);\n    }\n  }\n  \n  const meta = document.querySelector('meta[name=color-scheme]');\n  if (meta) {\n    if (theme === 'dark') {\n      meta.content = 'dark light';\n    } else if (theme === 'light') {\n      meta.content = 'light dark';\n    }\n  }\n})();\n`;\nfunction PreventFlashOnWrongTheme({ ssrTheme }) {\n    const [theme] = useTheme();\n    return ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsx)(\"meta\", { name: \"color-scheme\", content: theme === 'light' ? 'light dark' : 'dark light' }), ssrTheme ? null : ((0, jsx_runtime_1.jsx)(\"script\", { \n                // NOTE: we cannot use type=\"module\" because that automatically makes\n                // the script \"defer\". That doesn't work for us because we need\n                // this script to run synchronously before the rest of the document\n                // is finished loading.\n                dangerouslySetInnerHTML: { __html: clientThemeCode } }))] }));\n}\nexports.PreventFlashOnWrongTheme = PreventFlashOnWrongTheme;\nfunction useTheme() {\n    const context = (0, react_1.useContext)(ThemeContext);\n    if (context === undefined) {\n        throw new Error('useTheme must be used within a ThemeProvider');\n    }\n    return context;\n}\nexports.useTheme = useTheme;\nfunction isTheme(value) {\n    return typeof value === 'string' && exports.themes.includes(value);\n}\nexports.isTheme = isTheme;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createThemeSessionResolver = void 0;\nconst theme_provider_1 = require(\"./theme-provider\");\nconst createThemeSessionResolver = (cookieThemeSession) => {\n    const resolver = async (request) => {\n        const session = await cookieThemeSession.getSession(request.headers.get('Cookie'));\n        return {\n            getTheme: () => {\n                const themeValue = session.get('theme');\n                return (0, theme_provider_1.isTheme)(themeValue) ? themeValue : null;\n            },\n            setTheme: (theme) => session.set('theme', theme),\n            commit: () => cookieThemeSession.commitSession(session),\n        };\n    };\n    return resolver;\n};\nexports.createThemeSessionResolver = createThemeSessionResolver;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createThemeAction = void 0;\nconst server_runtime_1 = require(\"@remix-run/server-runtime\");\nconst theme_provider_1 = require(\"./theme-provider\");\nconst createThemeAction = (themeSessionResolver) => {\n    const action = async ({ request }) => {\n        const session = await themeSessionResolver(request);\n        const { theme } = await request.json();\n        if (!(0, theme_provider_1.isTheme)(theme)) {\n            let message = theme\n                ? `theme value of ${theme} is not a valid theme.`\n                : `empty theme provided`;\n            return (0, server_runtime_1.json)({\n                success: false,\n                message,\n            });\n        }\n        session.setTheme(theme);\n        return (0, server_runtime_1.json)({ success: true }, {\n            headers: { 'Set-Cookie': await session.commit() },\n        });\n    };\n    return action;\n};\nexports.createThemeAction = createThemeAction;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createThemeAction = exports.PreventFlashOnWrongTheme = exports.isTheme = exports.Theme = exports.themes = exports.useTheme = exports.ThemeProvider = exports.createThemeSessionResolver = void 0;\nvar theme_server_1 = require(\"./theme-server\");\nObject.defineProperty(exports, \"createThemeSessionResolver\", { enumerable: true, get: function () { return theme_server_1.createThemeSessionResolver; } });\nvar theme_provider_1 = require(\"./theme-provider\");\nObject.defineProperty(exports, \"ThemeProvider\", { enumerable: true, get: function () { return theme_provider_1.ThemeProvider; } });\nObject.defineProperty(exports, \"useTheme\", { enumerable: true, get: function () { return theme_provider_1.useTheme; } });\nObject.defineProperty(exports, \"themes\", { enumerable: true, get: function () { return theme_provider_1.themes; } });\nObject.defineProperty(exports, \"Theme\", { enumerable: true, get: function () { return theme_provider_1.Theme; } });\nObject.defineProperty(exports, \"isTheme\", { enumerable: true, get: function () { return theme_provider_1.isTheme; } });\nObject.defineProperty(exports, \"PreventFlashOnWrongTheme\", { enumerable: true, get: function () { return theme_provider_1.PreventFlashOnWrongTheme; } });\nvar create_theme_action_1 = require(\"./create-theme-action\");\nObject.defineProperty(exports, \"createThemeAction\", { enumerable: true, get: function () { return create_theme_action_1.createThemeAction; } });\n", "function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f)}else for(f in e)e[f]&&(n&&(n+=\" \"),n+=f);return n}export function clsx(){for(var e,t,f=0,n=\"\",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;"],
  "mappings": "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",
  "names": ["Theme"]
}
